(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{23:function(e,t,a){e.exports=a(36)},28:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),c=a.n(l),o=(a(28),a(10)),u=(a(29),a(6)),s=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"NotesPage"))},i=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"CreatePage"))},m=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"DetailPage"))},d=a(7),b=a.n(d),p=a(12),E=a(9),v=a(13),f=a(5);a(31);var h=Object(n.createContext)({token:null,userId:null,login:void 0,logout:void 0,isAuthenticated:!1}),g=function(){var e=Object(n.useContext)(h),t=Object(n.useCallback)((function(e){window.M&&e&&window.M.toast({html:e})}),[]),a=function(){var e=Object(n.useState)(!1),t=Object(f.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(null),c=Object(f.a)(l,2),o=c[0],u=c[1];return{loading:a,request:Object(n.useCallback)(function(){var e=Object(p.a)(b.a.mark((function e(t){var a,n,l,c,o,s=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:"GET",n=s.length>2&&void 0!==s[2]?s[2]:null,l=s.length>3&&void 0!==s[3]?s[3]:{},r(!0),e.prev=4,n&&(n=JSON.stringify(n),l["Content-Type"]="application/json"),e.next=8,fetch(t,{method:a,body:n,headers:l});case 8:return c=e.sent,e.next=11,c.json();case 11:if(o=e.sent,c.ok){e.next=14;break}throw new Error(o.message||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 14:return r(!1),e.abrupt("return",o);case 18:throw e.prev=18,e.t0=e.catch(4),r(!1),u(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:o,clearError:Object(n.useCallback)((function(){return u(null)}),[])}}(),l=a.loading,c=a.error,o=a.request,u=a.clearError,s=Object(n.useState)({email:"",password:""}),i=Object(f.a)(s,2),m=i[0],d=i[1];Object(n.useEffect)((function(){t(c),u()}),[c,t,u]),Object(n.useEffect)((function(){window.M.updateTextFields()}),[]);var g=function(e){d(Object(v.a)({},m,Object(E.a)({},e.target.name,e.target.value)))},w=function(){var e=Object(p.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o("/api/auth/register","POST",Object(v.a)({},m));case 3:a=e.sent,t(a.message),console.log("DATA",a),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var t=Object(p.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o("/api/auth/login","POST",Object(v.a)({},m));case 3:a=t.sent,e.login(a.token,a.userId),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6 offset-s3"},r.a.createElement("h1",null,"AdminKa"),r.a.createElement("div",{className:"card blue darken-1"},r.a.createElement("div",{className:"card-content white-text"},r.a.createElement("span",{className:"card-title"},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement("div",null,r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{className:"yellow-input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",id:"email",type:"text",name:"email",onChange:g}),r.a.createElement("label",{htmlFor:"email"},"Email")),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{className:"yellow-input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",id:"password",type:"password",name:"password",onChange:g}),r.a.createElement("label",{htmlFor:"password"},"\u041f\u0430\u0440\u043e\u043b\u044c")))),r.a.createElement("div",{className:"card-action"},r.a.createElement("button",{className:"btn yellow darken-4",style:{marginRight:15},disabled:l,onClick:O},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement("button",{className:"btn grey lighten-1 black-text",onClick:w,disabled:l},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))))},w=function(){var e=Object(u.g)(),t=Object(n.useContext)(h);return r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper blue darken-1",style:{padding:"0 2 rem"}},r.a.createElement("span",Object(E.a)({className:"/"},"className","brand-logo"),"AdminKa"),r.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down"},r.a.createElement("li",null,r.a.createElement(o.b,{to:"/create"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/notes"},"\u0417\u0430\u043c\u0435\u0442\u043a\u0438")),r.a.createElement("li",null,r.a.createElement("a",{href:"/",onClick:function(a){a.preventDefault(),t.logout(),e.push("/")}},"\u0412\u044b\u0439\u0442\u0438")))))};var O=function(){var e=function(){var e=Object(n.useState)(null),t=Object(f.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(null),c=Object(f.a)(l,2),o=c[0],u=c[1],s=Object(n.useCallback)((function(e,t){r(e),u(t),localStorage.setItem("userData",JSON.stringify({userId:t,token:e}))}),[]),i=Object(n.useCallback)((function(){r(null),u(null),localStorage.removeItem("userData")}),[]);return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&s(e.token,e.userId)}),[s]),{login:s,logout:i,token:a,userId:o}}(),t=e.token,a=e.login,l=e.logout,c=e.userId,d=!!t,b=function(e){return e?r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/Notes",exact:!0},r.a.createElement(s,null)),r.a.createElement(u.b,{path:"/Create",exact:!0},r.a.createElement(i,null)),r.a.createElement(u.b,{path:"/Detail"},r.a.createElement(m,null)),r.a.createElement(u.a,{to:"/Create"})):r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/",exact:!0},r.a.createElement(g,null)),r.a.createElement(u.a,{to:"/"}))}(d);return r.a.createElement(h.Provider,{value:{token:t,login:a,logout:l,userId:c,isAuthenticated:d}},r.a.createElement(o.a,null,d&&r.a.createElement(w,null),r.a.createElement("div",{className:"container"},b)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.60d9c257.chunk.js.map